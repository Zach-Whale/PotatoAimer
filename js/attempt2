

  var streamerName = new Array();
  var streamerInfoArray = new Array();
  var players = new Array();


  var myFetch = fetch("/pages/streamers.txt");
  myFetch.then(function(response) {
    response.text().then(function(text) {
      streamerName = text.split("\n");

      getStreamerInformation(getPlayerForStreamer());

    });
  });

  //
  // Get Information on Streamers
  //
function getStreamerInformation(callback)
{
  for(i in streamerName)
  {

    if(streamerName[i] != "")
    {
      var url = 'https://api.twitch.tv/helix/users?login=' + streamerName[i];
      //Client-ID","eu8zhc3k49ubec2brcpc824bhetvrk
      var streamerInfoFetch = fetch(url, {
        headers: {"client-ID": "eu8zhc3k49ubec2brcpc824bhetvrk"}
      });
      streamerInfoFetch.then(function(streamerInfoResponse){

        streamerInfoResponse.text().then(function(streamerInfoFetch){

          streamerInfoArray[i] = JSON.parse(streamerInfoFetch);


        });
      });


    }
  }

}
  ///
  /// get players for streamers
  ///

function getPlayerForStreamer()
{
  alert("here");
  alert(streamerInfoArray.length);
  for(i in streamerInfoArray)
  {

    alert(streamerInfoArray[i].data[0].display_name)


    var options = {
      width: 200,
      height: 200,
      channel: streamerInfoArray[i].data[0].display_name,
      autoplay: false
    };
    //alert(streamerName[i])
    document.getElementById("update").innerHtml = streamerInfoArray[i].data[0].display_name;
    var player = new Twitch.Player("update", options);

    players.push(player);

    //players[0].play();
